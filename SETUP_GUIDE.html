<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UniEventHub â€“ Full Setup Guide</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Segoe UI', sans-serif; font-size: 15px; line-height: 1.7; color: #1F2937; background: #F9FAFB; }
    .page { max-width: 960px; margin: 0 auto; padding: 40px 24px; }
    h1 { font-size: 2.4rem; font-weight: 800; background: linear-gradient(135deg,#4F46E5,#0EA5E9); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 8px; }
    h2 { font-size: 1.5rem; font-weight: 700; color: #111827; margin: 36px 0 16px; padding-bottom: 8px; border-bottom: 3px solid #4F46E5; }
    h3 { font-size: 1.1rem; font-weight: 700; color: #374151; margin: 24px 0 10px; }
    h4 { font-size: .95rem; font-weight: 700; color: #4F46E5; margin: 16px 0 8px; }
    p  { margin-bottom: 12px; color: #4B5563; }
    code { background: #F3F4F6; border: 1px solid #E5E7EB; border-radius: 4px; padding: 2px 6px; font-size: .875rem; font-family: 'Courier New', monospace; color: #7C3AED; }
    pre { background: #0F172A; color: #E2E8F0; border-radius: 10px; padding: 20px; overflow-x: auto; margin: 14px 0; font-size: .875rem; line-height: 1.6; font-family: 'Courier New', monospace; }
    .step { background: white; border-radius: 12px; padding: 24px; margin-bottom: 16px; box-shadow: 0 2px 8px rgba(0,0,0,.06); border-left: 4px solid #4F46E5; }
    .step-num { display: inline-flex; align-items: center; justify-content: center; width: 32px; height: 32px; background: #4F46E5; color: white; border-radius: 50%; font-weight: 800; font-size: .875rem; margin-right: 10px; flex-shrink:0; }
    .step-title { font-size: 1.05rem; font-weight: 700; color: #111827; display: flex; align-items: center; margin-bottom: 12px; }
    .badge { display: inline-block; padding: 3px 10px; border-radius: 20px; font-size: .78rem; font-weight: 700; margin: 2px; }
    .badge-blue { background: #DBEAFE; color: #1E40AF; }
    .badge-green { background: #D1FAE5; color: #065F46; }
    .badge-purple { background: #EDE9FE; color: #5B21B6; }
    .badge-red { background: #FEE2E2; color: #991B1B; }
    .badge-yellow { background: #FEF3C7; color: #92400E; }
    .warn { background: #FEF3C7; border: 1px solid #FCD34D; border-radius: 8px; padding: 14px 18px; margin: 12px 0; }
    .warn strong { color: #92400E; }
    .info { background: #EFF6FF; border: 1px solid #BFDBFE; border-radius: 8px; padding: 14px 18px; margin: 12px 0; }
    .info strong { color: #1E40AF; }
    .success-box { background: #D1FAE5; border: 1px solid #6EE7B7; border-radius: 8px; padding: 14px 18px; margin: 12px 0; }
    .success-box strong { color: #065F46; }
    table { width: 100%; border-collapse: collapse; margin: 14px 0; border-radius: 8px; overflow: hidden; box-shadow: 0 1px 4px rgba(0,0,0,.06); }
    th { background: #4F46E5; color: white; padding: 11px 14px; text-align: left; font-size: .85rem; }
    td { padding: 10px 14px; border-bottom: 1px solid #E5E7EB; font-size: .875rem; background: white; }
    tr:last-child td { border-bottom: none; }
    .file-tree { background: #0F172A; color: #94A3B8; border-radius: 10px; padding: 20px; font-family: 'Courier New', monospace; font-size: .875rem; line-height: 2; margin: 14px 0; }
    .file-tree .dir  { color: #60A5FA; font-weight: 700; }
    .file-tree .file { color: #86EFAC; }
    .file-tree .desc { color: #64748B; }
    .toc { background: white; border-radius: 12px; padding: 24px; box-shadow: 0 2px 8px rgba(0,0,0,.06); margin-bottom: 32px; }
    .toc h3 { color: #4F46E5; margin: 0 0 12px; }
    .toc ol { padding-left: 20px; }
    .toc li { margin-bottom: 6px; }
    .toc a { color: #4F46E5; text-decoration: none; }
    .toc a:hover { text-decoration: underline; }
    .hero-box { background: linear-gradient(135deg,#4F46E5,#0EA5E9); border-radius: 16px; padding: 36px; margin-bottom: 32px; color: white; }
    .hero-box h1 { -webkit-text-fill-color: white; background: none; }
    .hero-box p  { color: rgba(255,255,255,.85); }
    .flow-diagram { background: #F8FAFC; border: 1px solid #E2E8F0; border-radius: 12px; padding: 24px; margin: 16px 0; }
    .flow-row { display: flex; align-items: center; gap: 8px; margin-bottom: 14px; flex-wrap: wrap; }
    .flow-box { background: white; border: 2px solid #C7D2FE; border-radius: 8px; padding: 10px 16px; font-size: .85rem; font-weight: 600; color: #4338CA; text-align: center; min-width: 110px; }
    .flow-box.php  { border-color: #A7F3D0; color: #065F46; }
    .flow-box.db   { border-color: #FDE68A; color: #92400E; }
    .flow-box.user { border-color: #BFDBFE; color: #1E40AF; }
    .arrow { color: #9CA3AF; font-size: 1.2rem; font-weight: 700; }
    .credentials { background: #0F172A; color: #E2E8F0; border-radius: 10px; padding: 20px; margin: 14px 0; }
    .cred-row { display: flex; gap: 20px; margin-bottom: 10px; flex-wrap: wrap; }
    .cred-label { color: #60A5FA; font-weight: 700; min-width: 100px; font-size: .875rem; }
    .cred-val   { color: #86EFAC; font-family: 'Courier New', monospace; font-size: .875rem; }
  </style>
</head>
<body>
<div class="page">

  <!-- HERO -->
  <div class="hero-box">
    <h1>ğŸ“ UniEventHub</h1>
    <p style="font-size:1.15rem;margin-top:8px;margin-bottom:20px">Complete Developer Setup Guide â€” Step-by-Step Instructions to Run the Full Stack Project</p>
    <div>
      <span class="badge" style="background:rgba(255,255,255,.2);color:white">HTML5 + CSS3</span>
      <span class="badge" style="background:rgba(255,255,255,.2);color:white">Vanilla JavaScript</span>
      <span class="badge" style="background:rgba(255,255,255,.2);color:white">PHP 7.4+</span>
      <span class="badge" style="background:rgba(255,255,255,.2);color:white">MySQL 5.7+</span>
      <span class="badge" style="background:rgba(255,255,255,.2);color:white">XAMPP / WAMP</span>
    </div>
  </div>

  <!-- TABLE OF CONTENTS -->
  <div class="toc">
    <h3>ğŸ“‹ Table of Contents</h3>
    <ol>
      <li><a href="#prereqs">Prerequisites &amp; Tools Required</a></li>
      <li><a href="#file-structure">Complete File Structure</a></li>
      <li><a href="#step1">Step 1 â€” Install XAMPP</a></li>
      <li><a href="#step2">Step 2 â€” Copy Project Files</a></li>
      <li><a href="#step3">Step 3 â€” Create the MySQL Database</a></li>
      <li><a href="#step4">Step 4 â€” Import the SQL Schema</a></li>
      <li><a href="#step5">Step 5 â€” Configure DB Connection in PHP</a></li>
      <li><a href="#step6">Step 6 â€” Run setup.php to Create Admin</a></li>
      <li><a href="#step7">Step 7 â€” Launch &amp; Test All Features</a></li>
      <li><a href="#flow">How Everything Connects â€” Data Flow Diagrams</a></li>
      <li><a href="#auth">Registration &amp; Login Flow Explained in Detail</a></li>
      <li><a href="#roles">User Roles &amp; What Each Can Do</a></li>
      <li><a href="#db-schema">Database Schema Explained</a></li>
      <li><a href="#troubleshoot">Troubleshooting Common Errors</a></li>
    </ol>
  </div>

  <!-- SECTION 1: PREREQUISITES -->
  <h2 id="prereqs">1. Prerequisites &amp; Tools Required</h2>
  <table>
    <tr><th>Tool</th><th>Purpose</th><th>Required Version</th></tr>
    <tr><td><strong>XAMPP</strong></td><td>Bundles Apache web server + PHP + MySQL + phpMyAdmin</td><td>8.0 or higher</td></tr>
    <tr><td><strong>PHP</strong></td><td>Server-side backend scripting (comes with XAMPP)</td><td>7.4 â€“ 8.3</td></tr>
    <tr><td><strong>MySQL</strong></td><td>Relational database (comes with XAMPP)</td><td>5.7 â€“ 8.0</td></tr>
    <tr><td><strong>Web Browser</strong></td><td>Chrome, Firefox, or Edge to view the app</td><td>Latest version</td></tr>
    <tr><td><strong>VS Code (optional)</strong></td><td>Code editor for editing files</td><td>Any</td></tr>
  </table>
  <div class="info"><strong>â„¹ï¸ Alternative:</strong> If you're on Mac, use MAMP. On Linux, install LAMP stack (<code>sudo apt install apache2 php mysql-server</code>). The project works the same on all platforms.</div>

  <!-- SECTION 2: FILE STRUCTURE -->
  <h2 id="file-structure">2. Complete File Structure</h2>
  <p>After unzipping the project, this is exactly what the folder should contain:</p>
  <div class="file-tree">
<span class="dir">unieventhub/</span>
â”œâ”€â”€ <span class="file">index.php</span>            <span class="desc">â† Public homepage with events listing</span>
â”œâ”€â”€ <span class="file">login.php</span>            <span class="desc">â† Login page (all roles)</span>
â”œâ”€â”€ <span class="file">register.php</span>         <span class="desc">â† New user sign-up page</span>
â”œâ”€â”€ <span class="file">events.php</span>           <span class="desc">â† Browse all approved events</span>
â”œâ”€â”€ <span class="file">event-detail.php</span>     <span class="desc">â† View event details + register</span>
â”œâ”€â”€ <span class="file">setup.php</span>            <span class="desc">â† âš  One-time admin creator (delete after use!)</span>
â”‚
â”œâ”€â”€ <span class="dir">css/</span>
â”‚   â””â”€â”€ <span class="file">style.css</span>        <span class="desc">â† Global stylesheet (all pages use this)</span>
â”‚
â”œâ”€â”€ <span class="dir">js/</span>
â”‚   â””â”€â”€ <span class="file">main.js</span>          <span class="desc">â† Global JS: toasts, modals, validation</span>
â”‚
â”œâ”€â”€ <span class="dir">includes/</span>            <span class="desc">â† Shared PHP utilities</span>
â”‚   â”œâ”€â”€ <span class="file">db.php</span>          <span class="desc">â† PDO MySQL connection (EDIT THIS)</span>
â”‚   â””â”€â”€ <span class="file">auth.php</span>        <span class="desc">â† Session management, role guards</span>
â”‚
â”œâ”€â”€ <span class="dir">php/</span>                 <span class="desc">â† All backend action handlers (POST/GET)</span>
â”‚   â”œâ”€â”€ <span class="file">login.php</span>       <span class="desc">â† Verify credentials, create session</span>
â”‚   â”œâ”€â”€ <span class="file">register.php</span>    <span class="desc">â† Validate + insert new user</span>
â”‚   â”œâ”€â”€ <span class="file">logout.php</span>      <span class="desc">â† Destroy session, redirect</span>
â”‚   â”œâ”€â”€ <span class="file">save_event.php</span>  <span class="desc">â† Create or update an event</span>
â”‚   â”œâ”€â”€ <span class="file">delete_event.php</span>         <span class="desc">â† Delete event by ID</span>
â”‚   â”œâ”€â”€ <span class="file">register_event.php</span>       <span class="desc">â† Student registers for an event</span>
â”‚   â”œâ”€â”€ <span class="file">cancel_registration.php</span>  <span class="desc">â† Student cancels registration</span>
â”‚   â”œâ”€â”€ <span class="file">approve_event.php</span>        <span class="desc">â† Admin approves or rejects event</span>
â”‚   â”œâ”€â”€ <span class="file">toggle_user.php</span>          <span class="desc">â† Admin activates/deactivates user</span>
â”‚   â”œâ”€â”€ <span class="file">update_profile.php</span>       <span class="desc">â† Update profile name/dept/phone</span>
â”‚   â””â”€â”€ <span class="file">change_password.php</span>      <span class="desc">â† Change user password</span>
â”‚
â”œâ”€â”€ <span class="dir">student/</span>             <span class="desc">â† Student portal (role-protected)</span>
â”‚   â”œâ”€â”€ <span class="file">dashboard.php</span>   <span class="desc">â† Student home: stats + my events</span>
â”‚   â””â”€â”€ <span class="file">profile.php</span>     <span class="desc">â† Update student profile</span>
â”‚
â”œâ”€â”€ <span class="dir">organizer/</span>           <span class="desc">â† Organizer portal (role-protected)</span>
â”‚   â”œâ”€â”€ <span class="file">dashboard.php</span>   <span class="desc">â† Organizer home: manage events</span>
â”‚   â”œâ”€â”€ <span class="file">create-event.php</span><span class="desc">â† Create new event form</span>
â”‚   â”œâ”€â”€ <span class="file">edit-event.php</span>  <span class="desc">â† Edit existing event form</span>
â”‚   â”œâ”€â”€ <span class="file">participants.php</span><span class="desc">â† View registered participants</span>
â”‚   â””â”€â”€ <span class="file">profile.php</span>     <span class="desc">â† Update organizer profile</span>
â”‚
â”œâ”€â”€ <span class="dir">admin/</span>               <span class="desc">â† Admin panel (role-protected)</span>
â”‚   â”œâ”€â”€ <span class="file">dashboard.php</span>   <span class="desc">â† Admin home: system-wide stats</span>
â”‚   â”œâ”€â”€ <span class="file">events.php</span>      <span class="desc">â† Approve/reject/delete events</span>
â”‚   â”œâ”€â”€ <span class="file">users.php</span>       <span class="desc">â† Manage all users</span>
â”‚   â””â”€â”€ <span class="file">reports.php</span>     <span class="desc">â† Analytics and reports</span>
â”‚
â””â”€â”€ <span class="dir">sql/</span>
    â””â”€â”€ <span class="file">unieventhub.sql</span> <span class="desc">â† Full database schema (import this)</span>
  </div>

  <!-- STEP 1 -->
  <h2 id="step1">Step 1 â€” Install XAMPP</h2>
  <div class="step">
    <div class="step-title"><span class="step-num">1</span>Download &amp; Install XAMPP</div>
    <p>Go to <strong>https://www.apachefriends.org</strong> and download XAMPP for your operating system.</p>
    <p>Install it using the default settings. After installation, open the <strong>XAMPP Control Panel</strong>.</p>
    <p>Click <strong>Start</strong> next to both:</p>
    <ul style="margin-left:20px;margin-bottom:12px">
      <li><strong>Apache</strong> â€” the web server that runs PHP files</li>
      <li><strong>MySQL</strong> â€” the database server</li>
    </ul>
    <div class="success-box"><strong>âœ… Green means running.</strong> Both Apache and MySQL must show green/running status before you continue.</div>
    <div class="warn"><strong>âš ï¸ Port Conflict?</strong> If Apache doesn't start, another program (like Skype or IIS) may be using port 80 or 443. Change Apache port to 8080 in XAMPP â†’ Config â†’ httpd.conf, then access the project via <code>localhost:8080</code> instead.</div>
  </div>

  <!-- STEP 2 -->
  <h2 id="step2">Step 2 â€” Copy Project Files</h2>
  <div class="step">
    <div class="step-title"><span class="step-num">2</span>Place the Project in the Web Root</div>
    <p>XAMPP serves files from the <strong>htdocs</strong> folder. You need to copy your project there.</p>
    <p><strong>On Windows:</strong> <code>C:\xampp\htdocs\</code></p>
    <p><strong>On Mac:</strong> <code>/Applications/XAMPP/htdocs/</code></p>
    <p><strong>On Linux:</strong> <code>/opt/lampp/htdocs/</code></p>
    <p>Copy the entire <code>unieventhub</code> folder into <code>htdocs</code> so the path looks like:</p>
    <pre>C:\xampp\htdocs\unieventhub\index.php   âœ… Correct
C:\xampp\htdocs\index.php               âŒ Wrong â€” missing the subfolder</pre>
    <div class="info"><strong>â„¹ï¸</strong> After this, you should be able to open <code>http://localhost/unieventhub/</code> in your browser (even if the DB is not set up yet â€” you'll see an error message from PHP, which is expected).</div>
  </div>

  <!-- STEP 3 -->
  <h2 id="step3">Step 3 â€” Create the MySQL Database</h2>
  <div class="step">
    <div class="step-title"><span class="step-num">3</span>Open phpMyAdmin and Create the Database</div>
    <p>Open your browser and go to: <code>http://localhost/phpmyadmin</code></p>
    <p>phpMyAdmin is the visual tool for managing your MySQL databases.</p>
    <ol style="margin-left:20px;margin-bottom:12px;line-height:2.2">
      <li>In the left sidebar, click <strong>"New"</strong></li>
      <li>In the "Database name" box, type: <code>unieventhub</code></li>
      <li>In the "Collation" dropdown, select: <code>utf8mb4_unicode_ci</code></li>
      <li>Click <strong>"Create"</strong></li>
    </ol>
    <div class="success-box"><strong>âœ… Done!</strong> You should now see <code>unieventhub</code> listed in the left sidebar of phpMyAdmin.</div>
  </div>

  <!-- STEP 4 -->
  <h2 id="step4">Step 4 â€” Import the SQL Schema</h2>
  <div class="step">
    <div class="step-title"><span class="step-num">4</span>Import the Database Structure</div>
    <p>The file <code>sql/unieventhub.sql</code> contains all the table definitions needed by the app.</p>
    <ol style="margin-left:20px;line-height:2.4">
      <li>In phpMyAdmin, click on the <strong>unieventhub</strong> database in the left sidebar</li>
      <li>Click the <strong>"Import"</strong> tab at the top</li>
      <li>Click <strong>"Choose File"</strong> and navigate to your project folder:<br><code>C:\xampp\htdocs\unieventhub\sql\unieventhub.sql</code></li>
      <li>Leave all other settings as default</li>
      <li>Click <strong>"Go"</strong> at the bottom</li>
    </ol>
    <div class="success-box"><strong>âœ… Success!</strong> You should see a green success message and 5 tables created: <code>users</code>, <code>events</code>, <code>registrations</code>, <code>feedback</code>, <code>notifications</code></div>
    <div class="warn"><strong>âš ï¸ Error "Table already exists"?</strong> The database already has tables. Click "Drop" to remove them all first, then re-import.</div>
  </div>

  <!-- STEP 5 -->
  <h2 id="step5">Step 5 â€” Configure the Database Connection</h2>
  <div class="step">
    <div class="step-title"><span class="step-num">5</span>Edit includes/db.php</div>
    <p>Open <code>includes/db.php</code> in your code editor. You will see:</p>
    <pre>define('DB_HOST', 'localhost');
define('DB_USER', 'root');     // â† Your MySQL username
define('DB_PASS', '');         // â† Your MySQL password (usually blank for XAMPP)
define('DB_NAME', 'unieventhub');</pre>
    <p><strong>For default XAMPP installation:</strong> Username is <code>root</code> and password is <strong>blank (empty)</strong>. You do not need to change anything.</p>
    <p><strong>If you set a password for MySQL:</strong> Enter it between the quotes on the <code>DB_PASS</code> line.</p>
    <div class="info"><strong>â„¹ï¸ How DB Connection Works:</strong> This file creates a PDO (PHP Data Objects) connection. Every PHP page that needs database access does <code>require_once 'includes/db.php'</code> which gives it the <code>$pdo</code> variable to run queries. PDO automatically prevents SQL injection through prepared statements.</div>
  </div>

  <!-- STEP 6 -->
  <h2 id="step6">Step 6 â€” Run setup.php to Create Default Accounts</h2>
  <div class="step">
    <div class="step-title"><span class="step-num">6</span>Create Admin &amp; Demo Organizer Accounts</div>
    <p>Open your browser and visit:</p>
    <pre>http://localhost/unieventhub/setup.php</pre>
    <p>This page will automatically create two default accounts with properly hashed passwords:</p>
    <div class="credentials">
      <div class="cred-row">
        <span class="cred-label">ğŸ‘¤ Admin</span>
        <span class="cred-val">Email: admin@unieventhub.com</span>
        <span class="cred-val">Password: Admin@123</span>
      </div>
      <div class="cred-row">
        <span class="cred-label">ğŸ—‚ Organizer</span>
        <span class="cred-val">Email: organizer@unieventhub.com</span>
        <span class="cred-val">Password: Organizer@123</span>
      </div>
    </div>
    <div class="warn"><strong>âš ï¸ SECURITY â€” Very Important:</strong> After you see the "Setup Complete" page, immediately <strong>delete setup.php</strong> from your server. If left online, anyone can run it and overwrite accounts. On production servers never leave setup scripts accessible.</div>
  </div>

  <!-- STEP 7 -->
  <h2 id="step7">Step 7 â€” Launch &amp; Test All Features</h2>
  <div class="step">
    <div class="step-title"><span class="step-num">7</span>Open the Application in Your Browser</div>
    <p>Go to: <code>http://localhost/unieventhub/</code></p>
    <p>You should see the UniEventHub homepage with the navigation bar, hero section, and upcoming events grid (empty at first).</p>

    <h3>Test Student Flow:</h3>
    <ol style="margin-left:20px;line-height:2.4">
      <li>Click <strong>Sign Up</strong> â†’ register a new student account</li>
      <li>Check that you are redirected to the login page after registration</li>
      <li>Log in with the student credentials you just created</li>
      <li>You should land on the <strong>Student Dashboard</strong></li>
      <li>Click <strong>Browse Events</strong> â†’ see all approved events</li>
      <li>Click any event â†’ click <strong>Register Now</strong></li>
      <li>Return to Dashboard â†’ the event appears under "My Registered Events"</li>
    </ol>

    <h3 style="margin-top:20px">Test Organizer Flow:</h3>
    <ol style="margin-left:20px;line-height:2.4">
      <li>Log in with <code>organizer@unieventhub.com</code> / <code>Organizer@123</code></li>
      <li>Go to <strong>Create Event</strong> â†’ fill in all fields â†’ Submit</li>
      <li>Event status will show as "Pending Approval"</li>
      <li>Go to <strong>Participants</strong> for any event to see who registered</li>
    </ol>

    <h3 style="margin-top:20px">Test Admin Flow:</h3>
    <ol style="margin-left:20px;line-height:2.4">
      <li>Log in with <code>admin@unieventhub.com</code> / <code>Admin@123</code></li>
      <li>Go to <strong>Manage Events</strong> â†’ click <strong>Approve</strong> on a pending event</li>
      <li>Log out, log in as the student â†’ the event is now visible and registerable</li>
      <li>Go to <strong>Manage Users</strong> â†’ see all registered users and toggle active/inactive</li>
      <li>Go to <strong>Reports</strong> â†’ see analytics charts</li>
    </ol>
    <div class="success-box"><strong>âœ… Everything is working!</strong> Your full-stack UniEventHub application is live locally.</div>
  </div>

  <!-- DATA FLOW -->
  <h2 id="flow">8. How Everything Connects â€” Data Flow Diagrams</h2>

  <h3>Overall Architecture</h3>
  <div class="flow-diagram">
    <div class="flow-row">
      <div class="flow-box user">Browser (HTML/CSS/JS)</div>
      <div class="arrow">â†’ HTTP Request â†’</div>
      <div class="flow-box php">Apache Web Server</div>
      <div class="arrow">â†’ runs â†’</div>
      <div class="flow-box php">PHP File</div>
      <div class="arrow">â†’ PDO query â†’</div>
      <div class="flow-box db">MySQL Database</div>
    </div>
    <div class="flow-row">
      <div class="flow-box user">Browser receives HTML</div>
      <div class="arrow">â† HTTP Response â†</div>
      <div class="flow-box php">PHP renders HTML</div>
      <div class="arrow">â† result rows â†</div>
      <div class="flow-box db">MySQL returns data</div>
    </div>
    <p style="margin-top:12px;font-size:.875rem;color:#64748B">For AJAX calls (register, login, event registration), the browser sends FormData via fetch() and PHP returns JSON instead of HTML.</p>
  </div>

  <h3>Sign-Up Data Flow (Detailed)</h3>
  <div class="flow-diagram">
    <p style="font-weight:700;margin-bottom:12px">register.php â†’ php/register.php â†’ MySQL users table</p>
    <ol style="margin-left:20px;line-height:2.2;color:#374151">
      <li><strong>User fills the form</strong> on <code>register.php</code> and clicks "Create Account"</li>
      <li><strong>JavaScript validates</strong> the form client-side (empty checks, email format, password length, password match)</li>
      <li><strong>fetch() sends FormData</strong> via POST to <code>php/register.php</code></li>
      <li><strong>php/register.php</strong> re-validates server-side (never trust only client-side validation)</li>
      <li>Checks if email already exists â†’ <code>SELECT id FROM users WHERE email = ?</code></li>
      <li>If new email: <strong>password_hash()</strong> creates a bcrypt hash (cost 12)</li>
      <li><strong>INSERT INTO users</strong> (full_name, email, hashed_password, role, department, phone)</li>
      <li>Returns <code>{"success":true, "redirect":"../login.php"}</code></li>
      <li>JavaScript redirects the browser to <code>login.php</code></li>
    </ol>
  </div>

  <h3>Login Authentication Flow (Detailed)</h3>
  <div class="flow-diagram">
    <p style="font-weight:700;margin-bottom:12px">login.php â†’ php/login.php â†’ session â†’ role dashboard</p>
    <ol style="margin-left:20px;line-height:2.2;color:#374151">
      <li><strong>User enters email + password</strong> on <code>login.php</code></li>
      <li><strong>fetch() sends FormData</strong> via POST to <code>php/login.php</code></li>
      <li><strong>SELECT * FROM users WHERE email = ? AND is_active = 1</strong></li>
      <li><strong>password_verify()</strong> compares entered password against stored bcrypt hash</li>
      <li>If match: <code>session_regenerate_id(true)</code> (prevents session fixation attacks)</li>
      <li>Set session variables: <code>$_SESSION['user_id']</code>, <code>user_name</code>, <code>user_email</code>, <code>user_role</code></li>
      <li>Return JSON with redirect URL based on role: <code>admin/dashboard.php</code> | <code>organizer/dashboard.php</code> | <code>student/dashboard.php</code></li>
      <li><strong>Every protected page calls</strong> <code>requireRole()</code> from <code>includes/auth.php</code> which checks <code>$_SESSION['user_role']</code></li>
    </ol>
  </div>

  <h3>Event Registration Flow</h3>
  <div class="flow-diagram">
    <p style="font-weight:700;margin-bottom:12px">event-detail.php â†’ php/register_event.php â†’ registrations table â†’ notifications table</p>
    <ol style="margin-left:20px;line-height:2.2;color:#374151">
      <li>Student views <code>event-detail.php?id=X</code></li>
      <li>PHP checks: is user logged in? Is their role 'student'? Are they already registered? Is event full? Has it passed?</li>
      <li>If eligible, "Register Now" button is shown â†’ opens a confirmation modal</li>
      <li>On confirm, <code>fetch()</code> POSTs <code>event_id</code> to <code>php/register_event.php</code></li>
      <li>PHP re-validates all conditions server-side</li>
      <li><strong>INSERT INTO registrations</strong> (event_id, student_id, payment_status)</li>
      <li><strong>INSERT INTO notifications</strong> with confirmation message</li>
      <li>Returns success JSON â†’ page reloads showing "Already Registered" state</li>
    </ol>
  </div>

  <h3>Admin Approval Flow</h3>
  <div class="flow-diagram">
    <p style="font-weight:700;margin-bottom:12px">admin/events.php â†’ php/approve_event.php â†’ events table + notifications</p>
    <ol style="margin-left:20px;line-height:2.2;color:#374151">
      <li>Admin sees a list of all events in <code>admin/events.php</code></li>
      <li>Pending events show <strong>Approve</strong> and <strong>Reject</strong> buttons</li>
      <li>Clicking Approve calls <code>php/approve_event.php?id=X&amp;action=approve</code></li>
      <li><strong>UPDATE events SET status='approved' WHERE id=?</strong></li>
      <li>An <strong>INSERT INTO notifications</strong> is sent to the organizer: "Your event has been approved!"</li>
      <li>Only approved events appear on the public <code>events.php</code> page</li>
    </ol>
  </div>

  <!-- AUTH SECTION -->
  <h2 id="auth">9. Registration &amp; Login â€” Technical Details</h2>

  <h3>Password Security</h3>
  <p>Passwords are <strong>never stored as plain text</strong>. The system uses PHP's <code>password_hash()</code> with the <code>PASSWORD_BCRYPT</code> algorithm and a cost factor of 12, which makes brute-force attacks extremely slow.</p>
  <pre>// Hashing on registration:
$hashed = password_hash($password, PASSWORD_BCRYPT, ['cost' => 12]);
// Result looks like: $2y$12$abcdef....(60 chars)

// Verifying on login:
if (password_verify($entered_password, $stored_hash)) {
    // Login successful
}</pre>

  <h3>Session Management</h3>
  <p>PHP sessions are used to maintain the "logged in" state. When a user logs in:</p>
  <pre>session_regenerate_id(true);   // New session ID (security)
$_SESSION['user_id']    = $user['id'];
$_SESSION['user_name']  = $user['full_name'];
$_SESSION['user_email'] = $user['email'];
$_SESSION['user_role']  = $user['role'];  // 'admin', 'organizer', or 'student'</pre>

  <h3>Role-Based Access Control</h3>
  <p>Every dashboard page begins with a role guard. <code>includes/auth.php</code> provides these helpers:</p>
  <pre>requireLogin();         // Redirect to login if not logged in
requireRole('admin');   // Redirect if not admin
requireRole('student'); // Redirect if not student
requireRole('organizer');// Redirect if not organizer</pre>
  <p>This means even if someone knows the URL of <code>/admin/dashboard.php</code>, they will be immediately redirected to the login page if they are not an admin.</p>

  <h3>AJAX vs. Form POST</h3>
  <p>The project uses two patterns:</p>
  <p><strong>AJAX (fetch) â€” for login and registration:</strong> The form data is sent via <code>fetch()</code> to a PHP handler that returns JSON. JavaScript then shows success/error messages inline and redirects if needed. This gives a smooth experience without full page reloads.</p>
  <p><strong>Regular POST forms â€” for dashboards:</strong> Organizer event creation and profile update use standard HTML forms that POST directly to PHP handlers. PHP processes the data, sets a "flash message" in the session, then redirects. The next page reads and displays the flash message.</p>

  <!-- ROLES -->
  <h2 id="roles">10. User Roles &amp; Access Control</h2>
  <table>
    <tr><th>Role</th><th>Login Redirect</th><th>Permissions</th></tr>
    <tr>
      <td><span class="badge badge-red">Admin</span></td>
      <td><code>admin/dashboard.php</code></td>
      <td>Approve/reject events, manage all users (activate/deactivate), view reports, delete any event</td>
    </tr>
    <tr>
      <td><span class="badge badge-blue">Organizer</span></td>
      <td><code>organizer/dashboard.php</code></td>
      <td>Create events (submitted for admin approval), edit/delete own events, view participant lists</td>
    </tr>
    <tr>
      <td><span class="badge badge-green">Student</span></td>
      <td><code>student/dashboard.php</code></td>
      <td>Browse and search events, register/cancel event registrations, view notifications, update profile</td>
    </tr>
    <tr>
      <td><span class="badge badge-yellow">Guest</span></td>
      <td>N/A (not logged in)</td>
      <td>View homepage, browse events, view event details (cannot register without login)</td>
    </tr>
  </table>

  <!-- DB SCHEMA -->
  <h2 id="db-schema">11. Database Schema Explained</h2>

  <h3>users table</h3>
  <table>
    <tr><th>Column</th><th>Type</th><th>Purpose</th></tr>
    <tr><td><code>id</code></td><td>INT, PK, AUTO_INCREMENT</td><td>Unique identifier</td></tr>
    <tr><td><code>full_name</code></td><td>VARCHAR(150)</td><td>Display name</td></tr>
    <tr><td><code>email</code></td><td>VARCHAR(191), UNIQUE</td><td>Login username</td></tr>
    <tr><td><code>password</code></td><td>VARCHAR(255)</td><td>Bcrypt hash (never plain text)</td></tr>
    <tr><td><code>role</code></td><td>ENUM('student','organizer','admin')</td><td>Determines which portal they see</td></tr>
    <tr><td><code>department</code></td><td>VARCHAR(100)</td><td>Academic department</td></tr>
    <tr><td><code>phone</code></td><td>VARCHAR(20)</td><td>Contact number</td></tr>
    <tr><td><code>is_active</code></td><td>TINYINT(1)</td><td>1=active, 0=deactivated by admin</td></tr>
  </table>

  <h3>events table</h3>
  <table>
    <tr><th>Column</th><th>Type</th><th>Purpose</th></tr>
    <tr><td><code>id</code></td><td>INT, PK</td><td>Unique event ID</td></tr>
    <tr><td><code>organizer_id</code></td><td>INT, FK â†’ users.id</td><td>Links to organizer who created it</td></tr>
    <tr><td><code>title</code></td><td>VARCHAR(255)</td><td>Event name</td></tr>
    <tr><td><code>category</code></td><td>ENUM</td><td>seminar, workshop, cultural, sports, etc.</td></tr>
    <tr><td><code>venue</code></td><td>VARCHAR(255)</td><td>Location</td></tr>
    <tr><td><code>event_date</code></td><td>DATE</td><td>Date of event</td></tr>
    <tr><td><code>status</code></td><td>ENUM('pending','approved','rejected','cancelled')</td><td>Approval state â€” only 'approved' events are public</td></tr>
    <tr><td><code>max_participants</code></td><td>INT</td><td>Cap on registrations</td></tr>
    <tr><td><code>registration_fee</code></td><td>DECIMAL(10,2)</td><td>0.00 = free event</td></tr>
  </table>

  <h3>registrations table</h3>
  <table>
    <tr><th>Column</th><th>Purpose</th></tr>
    <tr><td><code>event_id + student_id</code></td><td>Composite UNIQUE key â€” prevents double registration</td></tr>
    <tr><td><code>payment_status</code></td><td>'free', 'paid', or 'pending'</td></tr>
    <tr><td><code>attendance</code></td><td>0 or 1 â€” can be marked by organizer</td></tr>
  </table>

  <h3>notifications table</h3>
  <p>Auto-generated messages for users. Created when: a student registers for an event, an event is approved/rejected, etc. The student dashboard shows unread notifications and marks them read on page load.</p>

  <!-- TROUBLESHOOT -->
  <h2 id="troubleshoot">12. Troubleshooting Common Errors</h2>

  <h3>âŒ "Database connection failed"</h3>
  <div class="step">
    <p><strong>Cause:</strong> MySQL is not running, or wrong credentials in <code>includes/db.php</code></p>
    <p><strong>Fix:</strong></p>
    <ol style="margin-left:20px;line-height:2.2">
      <li>Open XAMPP Control Panel â€” make sure MySQL shows "Running" (green)</li>
      <li>Open <code>includes/db.php</code> and confirm <code>DB_USER</code> is <code>root</code> and <code>DB_PASS</code> is empty <code>''</code></li>
      <li>Try accessing <code>http://localhost/phpmyadmin</code> â€” if this fails, MySQL is not running</li>
    </ol>
  </div>

  <h3>âŒ "Page not found" (404 Error)</h3>
  <div class="step">
    <p><strong>Cause:</strong> Files are not in the right location inside htdocs.</p>
    <p><strong>Fix:</strong> Verify the folder is at <code>C:\xampp\htdocs\unieventhub\index.php</code> not <code>C:\xampp\htdocs\unieventhub\unieventhub\index.php</code> (double-nested folders).</p>
  </div>

  <h3>âŒ Login works but redirects to wrong page</h3>
  <div class="step">
    <p><strong>Cause:</strong> Session might not be starting properly, or PHP session extension is disabled.</p>
    <p><strong>Fix:</strong> In <code>php.ini</code> (found in <code>C:\xampp\php\php.ini</code>), make sure <code>session.auto_start = 0</code> and that <code>extension=session</code> is enabled (no semicolon in front).</p>
  </div>

  <h3>âŒ "Access denied" when trying to access a dashboard</h3>
  <div class="step">
    <p><strong>Cause:</strong> You are logged in as one role but trying to access another role's URL.</p>
    <p><strong>Fix:</strong> Log out first (<code>http://localhost/unieventhub/php/logout.php</code>) then log in with the correct account. Each role has its own dashboard URL.</p>
  </div>

  <h3>âŒ Events not showing on homepage</h3>
  <div class="step">
    <p><strong>Cause:</strong> Events must have <code>status = 'approved'</code> to appear publicly.</p>
    <p><strong>Fix:</strong> Log in as admin â†’ go to Manage Events â†’ approve the events. Then they will show on the homepage and events page.</p>
  </div>

  <h3>âŒ "Event is Full" showing incorrectly</h3>
  <div class="step">
    <p><strong>Cause:</strong> The <code>max_participants</code> is set very low (e.g., 1).</p>
    <p><strong>Fix:</strong> Log in as organizer â†’ Edit Event â†’ increase Max Participants value.</p>
  </div>

  <h3>âŒ setup.php shows "Already Set Up"</h3>
  <div class="step">
    <p><strong>Cause:</strong> The users table already has records. Setup can only run once.</p>
    <p><strong>Fix:</strong> If you need to reset, go to phpMyAdmin â†’ select the unieventhub database â†’ click on the <code>users</code> table â†’ click "Empty" to clear it â†’ then run setup.php again. Or just use the existing admin credentials.</p>
  </div>

  <h3>âŒ White blank page with no error</h3>
  <div class="step">
    <p><strong>Cause:</strong> PHP errors are hidden. Enable error reporting to debug.</p>
    <p>Add these two lines at the very top of <code>index.php</code> temporarily:</p>
    <pre>ini_set('display_errors', 1);
error_reporting(E_ALL);</pre>
    <p>Remove them after fixing the issue.</p>
  </div>

  <!-- QUICK REFERENCE -->
  <h2>13. Quick Reference â€” All URLs</h2>
  <table>
    <tr><th>Page</th><th>URL</th><th>Access</th></tr>
    <tr><td>Homepage</td><td><code>http://localhost/unieventhub/</code></td><td>Public</td></tr>
    <tr><td>All Events</td><td><code>http://localhost/unieventhub/events.php</code></td><td>Public</td></tr>
    <tr><td>Login</td><td><code>http://localhost/unieventhub/login.php</code></td><td>Public</td></tr>
    <tr><td>Register</td><td><code>http://localhost/unieventhub/register.php</code></td><td>Public</td></tr>
    <tr><td>Setup (one-time)</td><td><code>http://localhost/unieventhub/setup.php</code></td><td>Delete after use</td></tr>
    <tr><td>Student Dashboard</td><td><code>http://localhost/unieventhub/student/dashboard.php</code></td><td>Students only</td></tr>
    <tr><td>Student Profile</td><td><code>http://localhost/unieventhub/student/profile.php</code></td><td>Students only</td></tr>
    <tr><td>Organizer Dashboard</td><td><code>http://localhost/unieventhub/organizer/dashboard.php</code></td><td>Organizers only</td></tr>
    <tr><td>Create Event</td><td><code>http://localhost/unieventhub/organizer/create-event.php</code></td><td>Organizers only</td></tr>
    <tr><td>Admin Dashboard</td><td><code>http://localhost/unieventhub/admin/dashboard.php</code></td><td>Admins only</td></tr>
    <tr><td>Admin: Events</td><td><code>http://localhost/unieventhub/admin/events.php</code></td><td>Admins only</td></tr>
    <tr><td>Admin: Users</td><td><code>http://localhost/unieventhub/admin/users.php</code></td><td>Admins only</td></tr>
    <tr><td>Admin: Reports</td><td><code>http://localhost/unieventhub/admin/reports.php</code></td><td>Admins only</td></tr>
    <tr><td>Logout (any role)</td><td><code>http://localhost/unieventhub/php/logout.php</code></td><td>Logged-in users</td></tr>
  </table>

  <div style="background:linear-gradient(135deg,#4F46E5,#0EA5E9);border-radius:14px;padding:32px;text-align:center;margin-top:40px;color:white">
    <h2 style="border:none;color:white;margin:0 0 10px">ğŸ“ UniEventHub is Ready!</h2>
    <p style="color:rgba(255,255,255,.85);margin-bottom:0">All files are provided. Follow the 7 steps above and your full-stack application will be running in under 10 minutes. For any issues, refer to the Troubleshooting section.</p>
  </div>

</div>
</body>
</html>
